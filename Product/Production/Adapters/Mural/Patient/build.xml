<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<project name="Patient" default="default" basedir="." xmlns:ear="http://www.netbeans.org/ns/j2ee-earproject/2">
  <description>Builds, tests, and runs the project Patient.</description>
  <import file="nbproject/build-impl.xml"/>

  <import file="../../../../build.lib.xml" />

  <target name="build">
    <property name="target-to-call" value="dist" />
    <antcall target="call-target-in-isolation-if-out-of-date" />
  </target>
  <target name="clean-build" depends="clean,build" />
  <target name="clean-test" depends="clean-build,test" />
  <target name="build-test" depends="build,test" />

  <target name="deps-j2ee-archive" depends="init" unless="no.deps">
    <property name="project.Patient-ejb.Absolute" location="${project.Patient-ejb}"/>
    <property name="project.Patient-war.Absolute" location="${project.Patient-war}"/>

    <ant dir="${project.Patient-ejb.Absolute}" target="dist-ear" inheritall="false" antfile="${project.Patient-ejb.Absolute}/build.xml">
      <property name="dist.ear.dir" location="${build.dir}"/>
    </ant>
    <ant dir="${project.Patient-war.Absolute}" target="dist-ear" inheritall="false" antfile="${project.Patient-war.Absolute}/build.xml">
      <property name="dist.ear.dir" location="${build.dir}"/>
    </ant>
  </target>
  <target name="-run-deploy-am" unless="no.deps">
    <!--Task to deploy to the Access Manager runtime.-->
    <ant target="-run-deploy-am" inheritall="false" antfile="${project.Patient-ejb}/build.xml"/>
    <ant target="-run-deploy-am" inheritall="false" antfile="${project.Patient-war}/build.xml"/>
  </target>     
  <target name="deps-clean" depends="init" unless="no.deps">
    <ant target="clean-ear" inheritall="false" antfile="${project.Patient-ejb}/build.xml">
      <property name="dist.ear.dir" location="${build.dir}"/>
    </ant>
    <ant  target="clean-ear" inheritall="false" antfile="${project.Patient-war}/build.xml">
      <property name="dist.ear.dir" location="${build.dir}"/>
    </ant>
  </target>    

  <target name="gen-mdm-index-files" depends="init,validate-mi"/>

  <target depends="init,compile-test,-pre-test-run,-do-test-run" if="have.tests" name="-post-test-run">
    <copy todir="${nhin.project.home}\UnitTestResults">
      <fileset dir="${build.test.results.dir}"/>    
    </copy>
    <fail if="tests.failed" unless="ignore.failing.tests">Some tests failed; see details above.</fail>
  </target>	  

</project>
