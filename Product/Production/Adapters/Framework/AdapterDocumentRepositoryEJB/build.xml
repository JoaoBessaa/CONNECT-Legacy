<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<project name="AdapterDocumentRepositoryEJB" default="default" basedir="." xmlns:ejbjarproject="http://www.netbeans.org/ns/j2ee-ejbjarproject/3">
  <description>Builds, tests, and runs the project AdapterDocumentRepositoryEJB.</description>
  <import file="nbproject/build-impl.xml"/>

  <import file="../../../../build.lib.xml" />
  <property name="deploy.type" value="ejb" />
  <property name="deploy.isDeployable" value="false"/>

  <target name="build">
    <property name="target-to-call" value="dist" />
    <antcall target="call-target-in-isolation-if-out-of-date" />
  </target>
  <target name="clean-build" depends="clean,build" />
  <target name="clean-test" depends="clean-build,test" />
  <target name="build-test" depends="build,test" />

  <property name="deploy-type" value="ejb" />
  <property name="deploy.isDeployable" value="false" />

  <target name="wsimport-service-DocumentRegistryService" depends="wsimport-init">
    <copy todir="${basedir}/${meta.inf}/wsdl/DocumentRegistryService">
      <fileset dir="${basedir}/${meta.inf}/xml-resources/web-services/DocumentRegistryService/wsdl/"/>
    </copy>
    <copy todir="${basedir}/${meta.inf}/wsdl/schemas/">
      <fileset dir="${basedir}/${meta.inf}/xml-resources/web-services/DocumentRegistryService/schemas/" />
    </copy>
  </target>

  <target name="wsimport-service-DocumentRepositoryService" depends="wsimport-init">
    <copy todir="${basedir}/${meta.inf}/wsdl/DocumentRepositoryService">
      <fileset dir="${basedir}/${meta.inf}/xml-resources/web-services/DocumentRepositoryService/wsdl/"/>
    </copy>
    <copy todir="${basedir}/${meta.inf}/wsdl/schemas/">
      <fileset dir="${basedir}/${meta.inf}/xml-resources/web-services/DocumentRepositoryService/schemas/" />
    </copy>
  </target>

  <target depends="init" if="no.dist.ear.dir" name="-deps-module-jar" unless="no.deps">
    <property name="project.AdapterDocumentRepository.Absolute" location="${project.AdapterDocumentRepository}"/>

    <ant dir="${project.AdapterDocumentRepository.Absolute}" antfile="${project.AdapterDocumentRepository.Absolute}/build.xml" inheritall="false" target="build"/>
  </target>
  <target depends="init" if="dist.ear.dir" name="-deps-ear-jar" unless="no.deps">
    <property name="project.AdapterDocumentRepository.Absolute" location="${project.AdapterDocumentRepository}"/>

    <ant dir="${project.AdapterDocumentRepository.Absolute}" antfile="${project.AdapterDocumentRepository.Absolute}/build.xml" inheritall="false" target="build"/>
  </target>

  <target depends="init" if="no.dist.ear.dir" name="deps-clean" unless="no.deps">

    <property name="project.AdapterDocumentRepository.Absolute" location="${project.AdapterDocumentRepository}"/>


    <ant dir="${project.AdapterDocumentRepository.Absolute}" antfile="${project.AdapterDocumentRepository.Absolute}/build.xml" inheritall="false" target="clean"/>
  </target>
  <target depends="compile" name="library-inclusion-in-archive">
    <copy file="${reference.AdapterDocumentRepository.jar}" todir="${build.classes.dir}"/>
  </target>
  <target depends="compile" name="library-inclusion-in-manifest">
    <basename file="${reference.AdapterDocumentRepository.jar}" property="included.lib.reference.AdapterDocumentRepository.jar"/>
    <copy file="${reference.AdapterDocumentRepository.jar}" todir="${dist.ear.dir}"/>

  </target>

  <target depends="init" if="netbeans.home" name="undeploy-clean" unless="from.commandline">
    <nbundeploy failOnError="false" startServer="false"/>
  </target>

  <target depends="init,compile-test,-pre-test-run,-do-test-run" if="have.tests" name="-post-test-run">
    <copy todir="${nhin.project.home}\UnitTestResults">
      <fileset dir="${build.test.results.dir}"/>
    </copy>
    <fail if="tests.failed" unless="ignore.failing.tests">Some tests failed; see details above.</fail>
  </target>    
</project>
